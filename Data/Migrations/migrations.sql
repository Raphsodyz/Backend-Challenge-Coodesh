CREATE DATABASE IF NOT EXISTS futurespacedb;
USE futurespacedb;

CREATE TABLE IF NOT EXISTS ORBIT(
    ID CHAR(36) PRIMARY KEY,
    ID_FROM_API INT NULL,
    ATUALIZATION_DATE DATETIME NOT NULL,
    IMPORTED_T DATETIME NOT NULL,
    STATUS VARCHAR(15) NOT NULL,
    NAME VARCHAR(255) NULL,
    ABBREV VARCHAR(255) NULL
);

CREATE TABLE IF NOT EXISTS MISSION(
    ID CHAR(36) PRIMARY KEY,
    ID_FROM_API INT NULL,
    ATUALIZATION_DATE DATETIME NOT NULL,
    IMPORTED_T DATETIME NOT NULL,
    STATUS VARCHAR(15) NOT NULL,
    LAUNCH_LIBRARY_ID INT NULL,
    NAME VARCHAR(255) NULL,
    DESCRIPTION VARCHAR(255) NULL,
    TYPE VARCHAR(255) NULL,
    ID_ORBIT CHAR(36) NULL,
    LAUNCH_DESIGNATOR VARCHAR(255) NULL,

    FOREIGN KEY (ID_ORBIT) REFERENCES ORBIT(ID)
);

CREATE TABLE IF NOT EXISTS CONFIGURATION(
    ID CHAR(36) PRIMARY KEY,
    ID_FROM_API INT NULL,
    ATUALIZATION_DATE DATETIME NOT NULL,
    IMPORTED_T DATETIME NOT NULL,
    STATUS VARCHAR(15) NOT NULL,
    LAUNCH_LIBRARY_ID INT NULL,
    URL VARCHAR(1000) NULL,
    NAME VARCHAR(255) NULL,
    FAMILY VARCHAR(255) NULL,
    FULL_NAME VARCHAR(255) NULL,
    VARIANT VARCHAR(255) NULL
);

CREATE TABLE IF NOT EXISTS STATUS(
    ID CHAR(36) PRIMARY KEY,
    ID_FROM_API INT NULL,
    ATUALIZATION_DATE DATETIME NOT NULL,
    IMPORTED_T DATETIME NOT NULL,
    STATUS VARCHAR(15) NOT NULL,
    NAME VARCHAR(255) NULL,
    ABBREV VARCHAR(255) NULL,
    DESCRIPTION VARCHAR(1000) NULL
);

CREATE TABLE IF NOT EXISTS LAUNCH_SERVICE_PROVIDER(
    ID CHAR(36) PRIMARY KEY,
    ID_FROM_API INT NULL,
    ATUALIZATION_DATE DATETIME NOT NULL,
    IMPORTED_T DATETIME NOT NULL,
    STATUS VARCHAR(15) NOT NULL,    
    URL VARCHAR(1000) NULL,
    NAME VARCHAR(255) NULL,
    TYPE VARCHAR(255) NULL
);

CREATE TABLE IF NOT EXISTS LOCATION(
    ID CHAR(36) PRIMARY KEY,
    ID_FROM_API INT NULL,
    ATUALIZATION_DATE DATETIME NOT NULL,
    IMPORTED_T DATETIME NOT NULL,
    STATUS VARCHAR(15) NOT NULL,
    URL VARCHAR(1000) NULL,
    NAME VARCHAR(255) NULL,
    COUNTRY_CODE VARCHAR(255) NULL,
    MAP_IMAGE VARCHAR(1000) NULL,
    TOTAL_LAUNCH_COUNT INT NULL,
    TOTAL_LANDING_COUNT INT NULL
);

CREATE TABLE IF NOT EXISTS PAD(
    ID CHAR(36) PRIMARY KEY,
    ID_FROM_API INT NULL,
    ATUALIZATION_DATE DATETIME NOT NULL,
    IMPORTED_T DATETIME NOT NULL,
    STATUS VARCHAR(15) NOT NULL,
    URL VARCHAR(1000) NULL,
    AGENCY_ID INT NULL,
    NAME VARCHAR(255) NULL,
    INFO_URL VARCHAR(1000) NULL,
    WIKI_URL VARCHAR(1000) NULL,
    MAP_URL VARCHAR(1000) NULL,
    LATITUDE DOUBLE NULL,
    LONGITUDE DOUBLE NULL,
    ID_LOCATION CHAR(36) NULL,
    MAP_IMAGE VARCHAR(1000) NULL,
    TOTAL_LAUNCH_COUNT INT NULL,

    FOREIGN KEY(ID_LOCATION) REFERENCES LOCATION(ID)
);

CREATE TABLE IF NOT EXISTS ROCKET(
    ID CHAR(36) PRIMARY KEY,
    ID_FROM_API INT NULL,
    ATUALIZATION_DATE DATETIME NOT NULL,
    IMPORTED_T DATETIME NOT NULL,
    STATUS VARCHAR(15) NOT NULL,
    ID_CONFIGURATION CHAR(36) NULL,

    FOREIGN KEY(ID_CONFIGURATION) REFERENCES CONFIGURATION(ID)
);

CREATE TABLE IF NOT EXISTS LAUNCH(
    ID CHAR(36) PRIMARY KEY,
    ID_FROM_API INT NULL,
    ATUALIZATION_DATE DATETIME NOT NULL,
    IMPORTED_T DATETIME NOT NULL,
    STATUS VARCHAR(15) NOT NULL,
    API_GUID CHAR(36) NOT NULL,
    URL VARCHAR(1000) NOT NULL,
    LAUNCH_LIBRARY_ID INT NULL,
    SLUG VARCHAR(255) NULL,
    NAME VARCHAR(255) NULL,
    ID_STATUS CHAR(36) NULL,
    NET DATETIME NULL,
    WINDOW_END DATETIME NULL,
    WINDOW_START DATETIME NULL,
    INHOLD BIT NULL,
    TBD_TIME BIT NULL,
    TBD_DATE BIT NULL,
    PROBABILITY INT NULL,
    HOLD_REASON VARCHAR(255) NULL,
    FAIL_REASON VARCHAR(255) NULL,
    HASHTAG VARCHAR(255) NULL,
    ID_LAUNCH_SERVICE_PROVIDER CHAR(36) NULL,
    ID_ROCKET CHAR(36) NULL,
    ID_MISSION CHAR(36) NULL,
    ID_PAD CHAR(36) NULL,
    WEB_CAST_LIVE BIT NULL,
    IMAGE VARCHAR(1000) NULL,
    INFOGRAPHIC VARCHAR(255) NULL,
    PROGRAMS VARCHAR(255) NULL,

    FOREIGN KEY (ID_STATUS) REFERENCES STATUS(ID),
    FOREIGN KEY (ID_LAUNCH_SERVICE_PROVIDER) REFERENCES LAUNCH_SERVICE_PROVIDER(ID),
    FOREIGN KEY (ID_ROCKET) REFERENCES ROCKET(ID),
    FOREIGN KEY (ID_MISSION) REFERENCES MISSION(ID),
    FOREIGN KEY (ID_PAD) REFERENCES PAD(ID)
);

CREATE TABLE IF NOT EXISTS UPDATE_LOG(
    ID CHAR(36) PRIMARY KEY,
    ID_FROM_API INT NULL,
    ATUALIZATION_DATE DATETIME NOT NULL,
    IMPORTED_T DATETIME NOT NULL,
    STATUS VARCHAR(15) NOT NULL,
    TRANSACTION_DATE DATETIME NOT NULL,
    OFFSET INT NOT NULL,
    SUCCESS BIT NOT NULL,
    MESSAGE VARCHAR(255) NOT NULL,
    ENTITY_COUNT INT NOT NULL,
    ORIGIN VARCHAR(255) NOT NULL
);